<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="wordbook">

	<!-- 쿼리문 작성 -->
	
	<select id="selectWordbookAlldirectoryList" resultType="com.javaex.vo.WordbookVo" parameterType="com.javaex.vo.URLPathVo">
		select directoryno, directoryname
			from 
			(select d.directoryname,
			     d.directoryno
			from	directory d, users u
			where u.id = #{URLId}
			and u.userno = d.userno)
		ORDER BY DIRECTORYNO ASC
	</select>
	
	<select id="selectdirectoryWordbookList" resultType="com.javaex.vo.WordbookVo" parameterType="com.javaex.vo.URLPathVo">
	<![CDATA[
		select   u.nickname,
					w.wordbookno,
					w.wordbookname,
					w.wordbookregdate,
					w.wordbookaccess,
					w.wordbookmaker
		from 	wordbook w, directory d, users u
		where 	w.directoryno = d.directoryno
		and 		d.userno = u.userno
		and 		d.directoryno = #{directoryNo}
	]]>
	</select>

	<select id="selectDefaultWordbookList" resultType="com.javaex.vo.WordbookVo" parameterType="com.javaex.vo.URLPathVo">
	<![CDATA[
		select   u.nickname,
					w.wordbookno,
					w.wordbookname,
					w.wordbookregdate,
					w.wordbookaccess,
					w.wordbookmaker,
					d.directoryno
		from 	wordbook w, directory d, users u
		where 	w.directoryno = d.directoryno
		and 		d.userno = u.userno
		and 		d.directoryno = 
						(select 	d.directoryno
						from 	users u,directory d
						where 	u.id=#{URLId}
						and 		u.userno = d.userno
						and 		rownum=1)
	]]>
	</select>
	
<!-- 
	<insert id="insertGB" parameterType="com.javaex.vo.GuestBookVo">
		<![CDATA[
			insert into guestbook
			values (guestbook_seq.nextval,
			#{name},
			#{content},
			#{password},
			sysdate)
		]]>
	</insert>
-->
</mapper>